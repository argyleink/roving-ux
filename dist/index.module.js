var e={LEFT:37,UP:38,RIGHT:39,DOWN:40},t=new Map,n=function(e){var n=e.currentTarget;t.get("last_rover")!=n&&t.has(n)&&(s(n,t.get(n).active),t.set("last_rover",n))},r=function(t){var n=t.currentTarget;switch(t.keyCode){case e[isRtl?"LEFT":"RIGHT"]:case e.DOWN:t.preventDefault(),c(n);break;case e[isRtl?"RIGHT":"LEFT"]:case e.UP:t.preventDefault(),i(n)}},a=new MutationObserver(function(e,o){var c=new Set;t.forEach(function(e,t){c.add(t.classList[0])}),e.filter(function(e){return e.removedNodes.length>0}).forEach(function(e){e.removedNodes.forEach(function(e){1===e.nodeType&&t.forEach(function(o,c){if("last_rover"!==c&&e.contains(c)){var i,s=o;c.removeEventListener("focusin",n),c.removeEventListener("keydown",r),t.delete(c),s.targets.forEach(function(e){return e.tabIndex=""}),0===(null==(i=[].concat(t.keys()))?void 0:i.filter(function(e){return"last_rover"!==e})).length&&(t.clear(),a.disconnect())}})})})}),o=function(e){var o=e.element,c=e.target;window.getComputedStyle(document.documentElement);var i=o.querySelectorAll(c||":scope *"),s=i[0];o.tabIndex=-1,i.forEach(function(e){return e.tabIndex=-1}),s.tabIndex=0,t.set(o,{targets:i,active:s,index:0}),o.addEventListener("focusin",n),o.addEventListener("keydown",r),a.observe(document,{childList:!0,subtree:!0})},c=function(e){var n=t.get(e);n.index+=1,n.index>n.targets.length-1&&(n.index=n.targets.length-1);var r=n.targets[n.index];r&&s(e,r)},i=function(e){var n=t.get(e);n.index-=1,n.index<1&&(n.index=0);var r=n.targets[n.index];r&&s(e,r)},s=function(e,n){var r=t.get(e);r.active.tabIndex=-1,r.active=n,r.active.tabIndex=0,r.active.focus()};export{o as rovingIndex};
//# sourceMappingURL=index.module.js.map
