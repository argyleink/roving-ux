var e=new Map,t="rtl"===window.getComputedStyle(document.documentElement).direction,n={LEFT:37,UP:38,RIGHT:39,DOWN:40},r=function(t){var n=t.currentTarget;e.get("last_rover")!=n&&e.has(n)&&(d(n,e.get(n).active),e.set("last_rover",n))},a=function(e){var r=e.currentTarget;switch(e.keyCode){case n[t?"LEFT":"RIGHT"]:case n.DOWN:e.preventDefault(),i(r);break;case n[t?"RIGHT":"LEFT"]:case n.UP:e.preventDefault(),s(r)}},o=new MutationObserver(function(t,n){t.filter(function(e){return e.removedNodes.length>0}).forEach(function(t){[].concat(t.removedNodes).filter(function(e){return 1===e.nodeType}).forEach(function(t){e.forEach(function(n,c){"last_rover"!==c&&t.contains(c)&&(c.removeEventListener("focusin",r),c.removeEventListener("keydown",a),e.delete(c),n.targets.forEach(function(e){return e.tabIndex=""}),(0===e.size||1===e.size&&e.has("last_rover"))&&(e.clear(),o.disconnect()))})})})}),c=function(t){var n=t.element,c=n.querySelectorAll(t.target||":scope *"),i=c[0];n.tabIndex=-1,c.forEach(function(e){return e.tabIndex=-1}),i.tabIndex=0,e.set(n,{targets:c,active:i,index:0}),n.addEventListener("focusin",r),n.addEventListener("keydown",a),o.observe(document,{childList:!0,subtree:!0})},i=function(t){var n=e.get(t);n.index+=1,n.index>n.targets.length-1&&(n.index=n.targets.length-1);var r=n.targets[n.index];r&&d(t,r)},s=function(t){var n=e.get(t);n.index-=1,n.index<1&&(n.index=0);var r=n.targets[n.index];r&&d(t,r)},d=function(t,n){var r=e.get(t);r.active.tabIndex=-1,r.active=n,r.active.tabIndex=0,r.active.focus()};export{c as rovingIndex};
//# sourceMappingURL=index.module.js.map
