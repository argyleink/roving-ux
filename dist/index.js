var e=new Map,t="rtl"===window.getComputedStyle(document.documentElement).direction,n={LEFT:37,UP:38,RIGHT:39,DOWN:40},r=function(t){var n=t.currentTarget;e.get("last_rover")!=n&&e.has(n)&&(s(n,e.get(n).active),e.set("last_rover",n))},a=function(e){var r=e.currentTarget;switch(e.keyCode){case n[t?"LEFT":"RIGHT"]:case n.DOWN:e.preventDefault(),i(r);break;case n[t?"RIGHT":"LEFT"]:case n.UP:e.preventDefault(),c(r)}},o=new MutationObserver(function(t,n){t.filter(function(e){return e.removedNodes.length>0}).forEach(function(t){[].concat(t.removedNodes).filter(function(e){return 1===e.nodeType}).forEach(function(t){e.forEach(function(n,i){"last_rover"!==i&&t.contains(i)&&(i.removeEventListener("focusin",r),i.removeEventListener("keydown",a),e.delete(i),n.targets.forEach(function(e){return e.tabIndex=""}),(0===e.size||1===e.size&&e.has("last_rover"))&&(e.clear(),o.disconnect()))})})})}),i=function(t){var n=e.get(t);n.index+=1,n.index>n.targets.length-1&&(n.index=n.targets.length-1);var r=n.targets[n.index];r&&s(t,r)},c=function(t){var n=e.get(t);n.index-=1,n.index<1&&(n.index=0);var r=n.targets[n.index];r&&s(t,r)},s=function(t,n){var r=e.get(t);r.active.tabIndex=-1,r.active=n,r.active.tabIndex=0,r.active.focus()};exports.rovingIndex=function(t){var n=t.element,i=n.querySelectorAll(t.target||":scope *"),c=i[0];n.tabIndex=-1,i.forEach(function(e){return e.tabIndex=-1}),c.tabIndex=0,e.set(n,{targets:i,active:c,index:0}),n.addEventListener("focusin",r),n.addEventListener("keydown",a),o.observe(document,{childList:!0,subtree:!0})};
//# sourceMappingURL=index.js.map
