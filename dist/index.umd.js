!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).rovingUx={})}(this,function(e){var t=new Map,n="rtl"===window.getComputedStyle(document.documentElement).direction,r={LEFT:37,UP:38,RIGHT:39,DOWN:40},o=function(e){var n=e.currentTarget;t.get("last_rover")!=n&&t.has(n)&&(s(n,t.get(n).active),t.set("last_rover",n))},i=function(e){var t=e.currentTarget;switch(e.keyCode){case r[n?"LEFT":"RIGHT"]:case r.DOWN:e.preventDefault(),c(t);break;case r[n?"RIGHT":"LEFT"]:case r.UP:e.preventDefault(),d(t)}},a=new MutationObserver(function(e,n){e.filter(function(e){return e.removedNodes.length>0}).forEach(function(e){[].concat(e.removedNodes).filter(function(e){return 1===e.nodeType}).forEach(function(e){t.forEach(function(n,r){"last_rover"!==r&&e.contains(r)&&(r.removeEventListener("focusin",o),r.removeEventListener("keydown",i),t.delete(r),n.targets.forEach(function(e){return e.tabIndex=""}),(0===t.size||1===t.size&&t.has("last_rover"))&&(t.clear(),a.disconnect()))})})})}),c=function(e){var n=t.get(e);n.index+=1,n.index>n.targets.length-1&&(n.index=n.targets.length-1);var r=n.targets[n.index];r&&s(e,r)},d=function(e){var n=t.get(e);n.index-=1,n.index<1&&(n.index=0);var r=n.targets[n.index];r&&s(e,r)},s=function(e,n){var r=t.get(e);r.active.tabIndex=-1,r.active=n,r.active.tabIndex=0,r.active.focus()};e.rovingIndex=function(e){var n=e.element,r=n.querySelectorAll(e.target||":scope *"),c=r[0];n.tabIndex=-1,r.forEach(function(e){return e.tabIndex=-1}),c.tabIndex=0,t.set(n,{targets:r,active:c,index:0}),n.addEventListener("focusin",o),n.addEventListener("keydown",i),a.observe(document,{childList:!0,subtree:!0})}});
//# sourceMappingURL=index.umd.js.map
